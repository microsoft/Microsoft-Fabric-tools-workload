/**
 * ============================================================================
 * Wizard Control Styles - Fabric UX System Compliant
 * ============================================================================
 * 
 * Wizard component following Fabric UX System guidelines.
 * 
 * Provides step-by-step guidance interface with visual progress indication.
 * Supports completed, current, and upcoming step states.
 * 
 * ## Design Principles
 * - Clear visual hierarchy with step progression
 * - Accessible navigation and focus management
 * - Consistent with Microsoft Fabric design language
 * - Responsive design for various screen sizes
 * 
 * ## Usage
 * Import this file in components that use the WizardControl:
 * ```tsx
 * import './Wizard.scss';
 * ```
 */

.wizard-control {
  display: flex;
  flex-direction: column;
  height: 100%;
  width: 100%;
  max-height: 100%; // Never exceed container height
  min-width: 600px; // Reduced minimum width for smaller containers

  // Header area with title
  &__header {
    padding: 20px;
    background-color: white;
    border-bottom: 1px solid #e1dfdd;
    flex-shrink: 0;
  }

  &__title {
    color: #323130;
    margin: 0;
  }

  // Main content area
  &__main {
    display: flex;
    flex: 1;
    min-height: 0; // Allow flex child to shrink below content size
    overflow: hidden; // Prevent the main area from creating scrollbars
  }

  // Left panel - Steps navigation
  &__steps-panel {
    width: 180px;
    background-color: #FAFAFA;
    border-right: 1px solid #E1DFDD;
    padding: 12px;
    display: flex;
    flex-direction: column;
    overflow-y: auto; // Allow scrolling if steps don't fit
    min-height: 0; // Allow shrinking
    flex-shrink: 0; // Don't shrink the width
  }

  // Individual step container
  &__step {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    max-width: 280px;
    
    &--clickable {
      cursor: pointer;
      opacity: 1;
    }
    
    &--disabled {
      cursor: default;
      opacity: 0.6;
    }
  }

  // Step circle indicator
  &__step-circle {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    margin-top: 2px;
    
    // Step states
    &--completed,
    &--current {
      background-color: #018574;
    }
    
    &--upcoming {
      background-color: #E1DFDD;
    }
  }

  // Checkmark icon for completed steps
  &__step-checkmark {
    width: 12px;
    height: 8px;
    border-left: 2px solid white;
    border-bottom: 2px solid white;
    transform: rotate(-45deg);
    margin-top: -2px;
  }

  // Step number text
  &__step-number {
    line-height: 1;
    
    &--completed,
    &--current {
      color: white;
    }
    
    &--upcoming {
      color: #616161;
    }
  }

  // Step content area
  &__step-content {
    flex: 1;
    padding-bottom: 20px;
    display: flex;
    flex-direction: column;
    min-width: 0; // Allow text to wrap
  }

  // Step title
  &__step-title {
    display: block;
    margin-top: 4px;
    margin-bottom: 4px;
    width: 100%;
    word-wrap: break-word;
    
    &--current {
      color: #018574;
      font-weight: 600;
    }
    
    &--normal {
      color: #323130;
      font-weight: 500;
    }
  }

  // Step description
  &__step-description {
    color: #616161;
    display: block;
    line-height: 1.3;
    width: 100%;
    word-wrap: break-word;
  }

  // Connecting line between steps
  &__step-connector {
    width: 2px;
    height: 20px;
    margin-left: 11px;
    margin-top: -20px;
    margin-bottom: 0;
    
    &--completed {
      background-color: #107C10;
    }
    
    &--upcoming {
      background-color: #E1DFDD;
    }
  }

  // Right panel - Content area
  &__content-panel {
    flex: 1;
    padding: 12px;
    background-color: white;
    overflow: auto;
    min-height: 0; // Allow flex child to shrink
  }

  // Footer area
  &__footer {
    border-top: 1px solid #e1dfdd;
    background-color: white;
  }

  // Navigation container inside footer
  &__navigation {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 20px 8px 20px;
    gap: 12px;

    &-left {
      display: flex;
      align-items: center;
    }

    &-center {
      display: flex;
      align-items: center;
    }

    &-right {
      display: flex;
      gap: 12px;
      align-items: center;
    }
  }

  &__step-indicator {
    color: #616161;
    font-size: 12px;
  }
}

// Responsive adjustments for wizard
@media (max-width: 768px) {
  .wizard-control {
    min-width: 100%; // Fill available width on mobile
    
    &__steps-panel {
      width: 140px;
      padding: 8px;
    }
    
    &__step {
      gap: 8px;
    }
    
    &__content-panel {
      padding: 8px;
    }

    &__navigation {
      padding: 8px 12px;
      
      &-right {
        gap: 8px;
      }
    }
  }
}

// High contrast mode support
@media (prefers-contrast: high) {
  .wizard-control {
    &__steps-panel {
      border-right: 2px solid;
    }
    
    &__step-circle {
      border: 2px solid;
    }
    
    &__footer {
      border-top: 2px solid;
    }
  }
}

// Focus management for accessibility
.wizard-control {
  &__step--clickable:focus-visible {
    outline: 2px solid #0078d4;
    outline-offset: 2px;
  }
}

// Animation for step transitions
.wizard-control__content-panel {
  position: relative;
  
  // Fade transition for step content
  & > * {
    opacity: 1;
    transition: opacity 0.25s ease;
  }
  
  &.transitioning > * {
    opacity: 0;
  }
}

// Loading state for wizard steps
.wizard-control__step--loading {
  .wizard-control__step-circle {
    background: transparent;
    border: 2px solid #E1DFDD;
    position: relative;
    
    &::after {
      content: '';
      position: absolute;
      width: 16px;
      height: 16px;
      border: 2px solid #0078d4;
      border-top: 2px solid transparent;
      border-radius: 50%;
      animation: wizard-spin 1s linear infinite;
    }
  }
}

@keyframes wizard-spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}