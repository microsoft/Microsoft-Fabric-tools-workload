/**
 * ============================================================================
 * Wizard Control Styles - Fabric UX System Compliant
 * ============================================================================
 * 
 * Wizard component following Fabric UX System guidelines.
 * 
 * Provides step-by-step guidance interface with visual progress indication.
 * Supports completed, current, and upcoming step states.
 * 
 * ## Design Principles
 * - Clear visual hierarchy with step progression
 * - Accessible navigation and focus management
 * - Consistent with Microsoft Fabric design language
 * - Responsive design for various screen sizes
 * 
 * ## Usage
 * Import this file in components that use the WizardControl:
 * ```tsx
 * import './Wizard.scss';
 * ```
 */

.wizard-control {
  display: flex;
  flex-direction: column;
  min-height: 500px;
  min-width: 800px;

  // Main content area
  &__main {
    display: flex;
    flex: 1;
  }

  // Left panel - Steps navigation
  &__steps-panel {
    width: 180px;
    background-color: var(--colorNeutralBackground2, #292828);
    border-right: 1px solid var(--colorNeutralStroke2, #E1DFDD);
    padding: var(--spacingVerticalL, 20px);
    display: flex;
    flex-direction: column;
  }

  // Individual step container
  &__step {
    display: flex;
    align-items: flex-start;
    gap: var(--spacingHorizontalS, 12px);
    max-width: 280px;
    
    &--clickable {
      cursor: pointer;
      opacity: 1;
    }
    
    &--disabled {
      cursor: default;
      opacity: 0.6;
    }
  }

  // Step circle indicator
  &__step-circle {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    margin-top: 2px;
    
    // Step states
    &--completed,
    &--current {
      background-color: var(--colorPaletteGreenForeground1, #018574);
    }
    
    &--upcoming {
      background-color: var(--colorNeutralStroke2, #E1DFDD);
    }
  }

  // Checkmark icon for completed steps
  &__step-checkmark {
    width: 12px;
    height: 8px;
    border-left: 2px solid white;
    border-bottom: 2px solid white;
    transform: rotate(-45deg);
    margin-top: -2px;
  }

  // Step number text
  &__step-number {
    line-height: 1;
    
    &--completed,
    &--current {
      color: white;
    }
    
    &--upcoming {
      color: var(--colorNeutralForeground3, #616161);
    }
  }

  // Step content area
  &__step-content {
    flex: 1;
    padding-bottom: var(--spacingVerticalL, 20px);
  }

  // Step title
  &__step-title {
    display: block;
    margin-bottom: var(--spacingVerticalXXS, 4px);
    
    &--current {
      color: var(--colorPaletteGreenForeground1, #018574);
      font-weight: var(--fontWeightSemibold);
    }
    
    &--normal {
      color: var(--colorNeutralForeground1, #323130);
      font-weight: var(--fontWeightMedium);
    }
  }

  // Step description
  &__step-description {
    color: var(--colorNeutralForeground3, #616161);
    display: block;
    line-height: 1.3;
  }

  // Connecting line between steps
  &__step-connector {
    width: 2px;
    height: 20px;
    margin-left: 11px;
    margin-top: -20px;
    margin-bottom: 0;
    
    &--completed {
      background-color: var(--colorPaletteGreenForeground1, #107C10);
    }
    
    &--upcoming {
      background-color: var(--colorNeutralStroke2, #E1DFDD);
    }
  }

  // Right panel - Content area
  &__content-panel {
    flex: 1;
    padding: var(--spacingVerticalL, 20px);
    background-color: var(--colorNeutralBackground1, white);
    overflow: auto;
  }

  // Footer area
  &__footer {
    border-top: 1px solid var(--colorNeutralStroke2, #E1DFDD);
    background-color: var(--colorNeutralBackground1, white);
    padding: var(--spacingVerticalM, 12px) var(--spacingHorizontalL, 20px);
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-shrink: 0;

    // Footer button container
    &-buttons {
      display: flex;
      gap: var(--spacingHorizontalS, 12px);
      align-items: center;
    }

    // Footer navigation buttons
    &-button {
      min-width: 80px;
      height: 32px;
      border-radius: var(--borderRadiusMedium);
      font-weight: var(--fontWeightMedium);
      
      &--primary {
        background-color: var(--colorBrandBackground);
        color: var(--colorNeutralForegroundOnBrand);
        border: 1px solid var(--colorBrandBackground);
        
        &:hover {
          background-color: var(--colorBrandBackgroundHover);
          border-color: var(--colorBrandBackgroundHover);
        }
        
        &:disabled {
          background-color: var(--colorNeutralBackgroundDisabled);
          border-color: var(--colorNeutralStrokeDisabled);
          color: var(--colorNeutralForegroundDisabled);
        }
      }
      
      &--secondary {
        background-color: var(--colorNeutralBackground1);
        color: var(--colorNeutralForeground1);
        border: 1px solid var(--colorNeutralStroke1);
        
        &:hover {
          background-color: var(--colorNeutralBackground1Hover);
          border-color: var(--colorNeutralStroke1Hover);
        }
        
        &:disabled {
          background-color: var(--colorNeutralBackgroundDisabled);
          border-color: var(--colorNeutralStrokeDisabled);
          color: var(--colorNeutralForegroundDisabled);
        }
      }
    }
  }
}

// Responsive adjustments for wizard
@media (max-width: 768px) {
  .wizard-control {
    min-width: 100%;
    min-height: 400px;
    
    &__steps-panel {
      width: 140px;
      padding: var(--spacingVerticalM, 12px);
    }
    
    &__step {
      gap: var(--spacingHorizontalXS, 8px);
    }
    
    &__step-title {
      font-size: var(--fontSizeBase200);
    }
    
    &__step-description {
      font-size: var(--fontSizeBase100);
    }
    
    &__content-panel {
      padding: var(--spacingVerticalM, 12px);
    }
    
    &__footer {
      padding: var(--spacingVerticalS, 8px) var(--spacingHorizontalM, 12px);
      
      &-buttons {
        gap: var(--spacingHorizontalXS, 8px);
      }
      
      &-button {
        min-width: 70px;
        height: 28px;
        font-size: var(--fontSizeBase200);
      }
    }
  }
}

// High contrast mode support
@media (prefers-contrast: high) {
  .wizard-control {
    &__steps-panel {
      border-right: 2px solid;
    }
    
    &__step-circle {
      border: 2px solid;
      
      &--completed,
      &--current {
        border-color: var(--colorNeutralForeground1);
      }
      
      &--upcoming {
        border-color: var(--colorNeutralForeground3);
      }
    }
    
    &__footer {
      border-top: 2px solid;
      
      &-button {
        border-width: 2px;
        
        &:focus-visible {
          outline: 3px solid var(--colorNeutralForeground1);
          outline-offset: 2px;
        }
      }
    }
  }
}

// Focus management for accessibility
.wizard-control {
  &__step--clickable:focus-visible {
    outline: 2px solid var(--colorBrandStroke1);
    outline-offset: 2px;
    border-radius: var(--borderRadiusSmall);
  }
  
  &__footer-button:focus-visible {
    outline: 2px solid var(--colorBrandStroke1);
    outline-offset: 2px;
  }
}

// Animation for step transitions
.wizard-control__content-panel {
  position: relative;
  
  // Fade transition for step content
  & > * {
    opacity: 1;
    transition: opacity var(--durationNormal) var(--curveEasyEase);
  }
  
  &.transitioning > * {
    opacity: 0;
  }
}

// Loading state for wizard steps
.wizard-control__step--loading {
  .wizard-control__step-circle {
    background: transparent;
    border: 2px solid var(--colorNeutralStroke2);
    position: relative;
    
    &::after {
      content: '';
      position: absolute;
      width: 16px;
      height: 16px;
      border: 2px solid var(--colorBrandBackground);
      border-top: 2px solid transparent;
      border-radius: 50%;
      animation: wizard-spin 1s linear infinite;
    }
  }
}

@keyframes wizard-spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}